# Системные ограничения

Конфигурация платформы **ГдеМои — Локальная версия** предусматривает установку ограничений, предотвращающих перегрузку сервера.  
На этой странице описаны доступные параметры ограничений и способы их изменения.  
Регулируя количество устройств и период формирования отчётов, можно обеспечить оптимальную производительность и стабильную работу платформы, минимизируя риск перегрузки или простоев.

## Изменение стандартных ограничений

По умолчанию в платформе **ГдеМои** заданы ограничения, связанные с генерацией отчётов и настройкой уведомлений.  
Пользователь может формировать отчёты и создавать уведомления только для ограниченного количества устройств и за ограниченный период времени.  
Эти меры предотвращают перегрузку, так как отчётность и уведомления требуют значительных вычислительных ресурсов сервера.

Однако в некоторых бизнес-сценариях может потребоваться повышение лимитов.  
В **локальной версии** платформы вы можете изменить эти значения, если производительность сервера позволяет.  
Так можно формировать больше отчётов, создавать больше уведомлений и расширять сетевое покрытие без потери стабильности работы.

> ⚠️ Внимание!  
> Инструкции на этой странице включают редактирование конфигурационных файлов платформы.  
> Неправильные изменения могут привести к сбоям в работе системы.  
> Перед внесением изменений обязательно сделайте резервную копию конфигурации.

## Количество устройств в отчётах

Максимальное количество устройств, участвующих в отчёте, зависит от версии платформы и текущих настроек.  
Чтобы изменить лимит, нужно отредактировать файл **Config.js**, который расположен по пути:

* Linux: `/var/www/pro-ui/Config.js`
* Windows: `C:\nginx\www\pro-ui\Config.js`

В файле найдите блок `reportsMaxTrackersCount`. В современных версиях он выглядит так:

```
reportsMaxTrackersCount:{
StayInPlaces: 100,
TripsAndEvents: 100,
Zone: 100,
DetailingOfTransmittedData: 1
},
```

В этом блоке можно задать лимиты отдельно для каждого типа отчёта.

<details>
<summary>Полный список типов отчётов</summary>

* SOS  
* Fall  
* Detach  
* Safety  
* LocationRequest  
* VehicleReadings  
* DeviceOnOff  
* ExternalPower  
* LowBattery  
* DeviceStatus  
* Speeding  
* RoadRulesViolations  
* DeviceOnOffIdle  
* TaskReport  
* DrivingQuality  
* StatusReport  
* DriverChangesReport  
* FormFieldsValues  
* TripByState  
* TripByShifts  
* FuelConsumption  
* Checkin  
* StayInZones  
* StayInPlaces  
* TripsAndEvents  
* ZoneEvents  
* DetailingOfTransmittedData  
* FormFieldsValues  
* TaskReport  
* Event  
* TaskFullReport  

</details>

В большинстве случаев нет необходимости задавать лимиты отдельно — достаточно указать общий лимит для всех отчётов.  
Для этого добавьте строку `maxTrackersPerReport: XXXXX` сразу после блока выше.  
Пример (лимит 1000 устройств на отчёт):

```editorconfig
reportsMaxTrackersCount:{
StayInPlaces: 100,
TripsAndEvents: 100,
Zone: 100,
DetailingOfTransmittedData: 1
},
maxTrackersPerReport: 1000,
```

Теперь максимальное количество устройств в отчёте увеличено до 1000.

Параметр `maxTrackersPerReport` применяется ко всем отчётам, **кроме**:
* **Посещений геозон (Zone)**
* **Посещений мест (StayInPlaces)**

Для них ограничения задаются отдельно:

```
StayInPlaces: 1000,
Zone: 1000,
```

Отчёт **Детализация переданных данных** остаётся исключением — его можно создавать только для одного устройства.

## Количество устройств в уведомлениях

Максимальное количество устройств, для которых можно настроить уведомления, также задаётся в файле **Config.js**:

* Linux: `/var/www/pro-ui/Config.js`
* Windows: `C:\nginx\www\pro-ui\Config.js`

Найдите строку:

```
greenModeTrackersCount: 100,
```

Число в этой строке определяет, для скольких устройств можно задать одно уведомление.

## Диапазон дат в отчётах

По умолчанию максимальный диапазон дат для большинства отчётов составляет **90 дней**.  
Это значение можно увеличить, изменив файл конфигурации **api-server**, расположенный по пути:

* Linux: `/home/java/api-server/conf/config.properties`
* Windows: `C:\java\api-server\conf\config.properties`

Откройте файл и найдите строку:

```
maxReportTimeSpan=90d
```
Замените `90d` на нужное количество дней.  
Обязательно оставьте букву **d** после числа — она указывает, что значение выражено в днях.
