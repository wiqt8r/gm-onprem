# ГИС

## Как ГдеМои использует ГИС

Платформа **ГдеМои** интегрируется с дополнительными геоинформационными сервисами (ГИС), чтобы обеспечивать точные и эффективные функции геолокации, мониторинга и анализа для отслеживания транспортных средств, персонала и других объектов.  

Примеры таких сервисов:

* **Геокодирование** — процесс преобразования адресов (например, улицы и номера дома) в географические координаты (широту и долготу), а также координат в адреса (**обратное геокодирование**).  
* **Маршрутизация** — построение маршрута между двумя точками на карте. Для этого требуется внешний сервис геокодирования и маршрутизации (geocoder/route provider).  
* **Матрица расстояний (Distance Matrix)** — инструмент, используемый для расчёта расстояний и времени в пути между несколькими точками на карте. Эти данные применяются для оптимизации маршрутов, оценки времени и расхода топлива, а также для аналитики, основанной на местоположении.  
* **Базы LBS/Cell ID** — используются для определения местоположения устройств, не имеющих GPS, или при временной потере GPS-сигнала. В этих случаях **ГдеМои** использует данные базовых станций для триангуляции координат. Такая технология особенно полезна в зонах со слабым GPS-сигналом или при работе устройств внутри зданий.

---

## Популярные варианты ГИС

**ГдеМои** поддерживает работу с разными поставщиками ГИС-сервисов. Ниже представлены наиболее распространённые варианты и рекомендации по их интеграции.

---

### ГдеМои - Премиум ГИС

**ГдеМои Премиум ГИС** — это дополнительный пакет, предоставляющий расширенные возможности геоинформационных сервисов для компаний, которым необходима высокая точность данных и продвинутая картография.  
Пакет включает:

- премиальные сервисаы геокодирования (например, Google)
- премиальные сервисы маршрутизации
- расширенные функции работы с картами

Использование **Премиум ГИС** позволяет получать более точные координаты, а также оптимизировать маршруты и навигацию.  
Интеграция **ГдеМои – Локальная версия** с Премиум ГИС выполняется при первичной установке платформы, а также может быть осуществлена в любой момент времени по запросу.

---

### **Google Maps**

**Google Maps** — один из самых популярных сервисов благодаря мощным функциям геокодирования и маршрутизации.  
Если вы не хотите использовать **ГдеМои Премиум ГИС** и предпочитаете приобрести лицензию **Google Maps** самостоятельно, необходимо корректно настроить API-ключи и соблюсти определенные меры безопасности.

#### Рекомендации по настройке ключей API

По соображениям безопасности рекомендуется создать **три отдельных ключа Google API** и ограничить их использование следующим образом:

**Ключ Google API #1**

- Ограничить по HTTP-рефереру, например:  
  `*.your-domain.com/*`  (укажите свой домен вместо `your-domain`)
- Разрешить использование следующих API:
  * Google Maps JavaScript API  
  * Google Street View Image API  

**Ключ Google API #2**

- Ограничить по IP-адресу вашего сервера.  
- Разрешить следующие API:
  * Google Maps Geocoding API  
  * Google Maps Geolocation API  
  * Google Maps Directions API  

**Ключ Google API #3**

- Используется для отображения карт в email-уведомлениях.  
- Ограничить по HTTP-рефереру:  
  `*.your-domain.com/*`  
- Разрешить:
  * Google Static Maps API  
- Также необходимо сгенерировать **URL signing secret** для этого ключа.

Передайте созданные ключи в техническую поддержку **ГдеМои**, чтобы они были установлены, или воспользуйтесь нашим руководством, если вы хотите настроить их самостоятельно.  
Если вам нужна помощь с созданием ключей Google API, ознакомьтесь с инструкцией по ссылке:  
[Google Maps и Геокодирование](../configuration/maps-and-gis/google-maps-and-geocoding.md)

> ⚠️ Согласно политике Google, для использования API в целях трекинга активов требуется **Google Premium Plan**.  
> Подробнее — на официальном сайте:  
> [https://developers.google.com/maps/pricing-and-plans/](https://developers.google.com/maps/pricing-and-plans/)

---

### **OpenStreetMap**

**OpenStreetMap (OSM)** и **OpenSourceRoutingMachine (OSRM)** — это бесплатные решения с открытым исходным кодом для геокодирования и маршрутизации.  
**OSM** — это глобальный проект по созданию открытой карты мира, а **OSRM** — движок маршрутизации, использующий данные OSM для построения маршрутов между точками.

Недостаток использования OSM заключается в том, что точность данных может быть ниже, чем у Google, в некоторых регионах, а также существуют ограничения на количество запросов.  
Если отправлять слишком много запросов на геокодирование, IP-адрес может быть временно заблокирован серверами OSM.  
На практике лимиты начинают ощущаться примерно при **700+ устройствах**.

Однако для небольших установок OSM и OSRM могут стать вполне подходящим вариантом.  
Кроме того, их использование помогает поддерживать open-source инициативы и сообщество картографов по всему миру.

---

### **Nominatim**

**Nominatim** — это свободное программное обеспечение, предоставляющее функции геокодирования на основе данных **OpenStreetMap**.  
Подробнее — на [официальном сайте Nominatim](http://nominatim.org/release-docs/latest/).

---

### **Mapbox**

**Mapbox** предоставляет высокоточный сервис геокодирования и маршрутизации с глобальным охватом.  
Он также может быть интегрирован с **ГдеМои** для получения дополнительных возможностей — например, кастомизации карт и аналитики пространственных данных.  
Однако **Mapbox** является платным сервисом и может быть не самым подходящим вариантом для тех, кто ищет полностью бесплатное решение.
