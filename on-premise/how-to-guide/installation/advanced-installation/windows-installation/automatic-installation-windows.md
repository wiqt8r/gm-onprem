# Автоматическая установка — Windows

В этом руководстве описывается процесс установки платформы **ГдеМои – Локальная версия** на Windows с использованием автоматизированного скрипта.  
Данный способ предназначен для серверов под управлением Windows.

Для серверов на базе Linux используйте соответствующие инструкции.

## Предварительные требования

Перед началом установки необходимо подготовить следующее:

* Сервер (или несколько серверов), соответствующий [требованиям к серверному оборудованию](../../../requirements/server-hardware.md).  
  Учтите, что Windows-серверы обычно потребляют больше ресурсов, поэтому рекомендуется предусмотреть запас оперативной памяти и вычислительной мощности.
* Актуальную версию **Windows Server**. Скрипт разрабатывался на Windows Server 2025, но работает через **PowerShell**, поэтому совместим с другими современными версиями ОС.
* Дистрибутив и лицензионный ключ платформы, предоставленные командой **ГдеМои**.
* Зарегистрированные доменные имена, которые будут использоваться для доступа к вашему сервису.

Если вы не планируете использовать отдельные домены для API и панели администратора, конфигуратор автоматически создаст доступ к ним как к подкаталогам основного домена.

Автоматический установщик сам установит всё программное окружение, перечисленное в документе [Программное обеспечение](../../../requirements/server-software.md), поэтому вручную ничего ставить не нужно.  
Тем не менее, для удобства на Windows рекомендуется установить дополнительные инструменты:

* Расширенный текстовый редактор для работы с конфигурациями и логами — например, [Notepad++](https://notepad-plus-plus.org/downloads/).
* Архиватор, поддерживающий формат `tar.gz` (например, [7-Zip](https://www.7-zip.org/download.html)).  
  В актуальных версиях Windows этот формат поддерживается штатно, поэтому сторонний архиватор может не понадобиться.

Весь процесс установки должен выполняться **от имени администратора**.

### Сетевые настройки

Убедитесь, что на сервере открыты все необходимые порты. Если нет — откройте их вручную в брандмауэре Windows.

Как правило, это:

* Порты **80** и **443** — для HTTP/HTTPS.  
* Порт **32233** — для проверки лицензии.  
* Порты, используемые устройствами для связи с сервером.  
* Порт **3306** — для доступа к базе данных (если используется отдельный сервер).

Подробнее о сетевой конфигурации см. раздел [Сеть](../../../requirements/network.md).

---

## Пакет ГдеМои

Дистрибутив **ГдеМои – Локальная версия** всегда доступен по прямой ссылке:

[⬇️ Скачать дистрибутив платформы](https://get.navixy.com/latest)

Браузер может предупредить о небезопасной загрузке — это нормально для архивов `.tar.gz`. Смело игнорируйте предупреждение и продолжайте загрузку.

После скачивания распакуйте архив и перейдите в папку `\navixy-package`.  
Именно с ней будут связаны все последующие шаги.

---

## Установочный скрипт

Перейдите в каталог `\navixy-package\windows` и запустите скрипт **NavixyInstaller.ps1** через PowerShell.

![Запуск через PowerShell](../../../../../on-premise-how-to-guide/installation/advanced-installation/windows-installation/attachments/image-20250527-122145.png)

После запуска появится меню выбора типа установки:

![Меню установщика](../../../../../on-premise-how-to-guide/installation/advanced-installation/windows-installation/attachments/image-20250527-122250.png)

Вы можете установить все компоненты на один сервер или развернуть базу данных и приложение отдельно.

---

## Установка на один сервер

Чтобы развернуть платформу на одном сервере, выберите пункт  
`Install All Components (Full Installation)` — введите **1** и нажмите **Enter**.

Если вы планируете разместить базу данных на отдельном сервере, пропустите этот раздел и перейдите к разделу **Два сервера** ниже.

Скрипт запросит следующие данные:

* **Лицензионный ключ** — укажите код, полученный от отдела технических решений **ГдеМои**.  
  При его отсутствии остановите установку и свяжитесь с вашим менеджером или по адресу **solutions@gdemoi.ru**.
* **Пароль к базе данных** — будет присвоен пользователю `navixy` и использован сервисами платформы.
* **Домен сервиса** — основной домен вашей платформы (используется клиентами для входа).
* **Домен API** *(необязательно)* — если не требуется, просто нажмите Enter.
* **Домен панели администратора** *(необязательно)* — если не требуется, просто нажмите Enter.
* **Настройка SSL** — введите `y` для HTTPS или `n` для HTTP.
* **Пути к SSL-сертификатам** — полные пути к файлам сертификатов (`.crt`) и приватных ключей (`.key`) для каждого домена.

![Windows - AiO](../../../../../on-premise-how-to-guide/installation/advanced-installation/windows-installation/attachments/image-20250527-125239.png)

После указания всех параметров скрипт установит платформу и необходимое окружение.  
Процесс может занять некоторое время. В консоли PowerShell вы увидите шаги:

1. Установка JDK  
2. Загрузка Nginx  
3. Установка MySQL  
4. Настройка MySQL  
5. Инициализация структуры БД  
6. Настройка веб-сайта  
7. Конфигурация backend-сервисов

Участие в процессе не требуется. Если возникнут ошибки — скрипт сообщит об этом.

После завершения установки переходите к разделу **Заключительные шаги**.

---

## Установка на два сервера

В этом варианте база данных и приложение размещаются на отдельных серверах.  
Распакуйте `/navixy-package` на обеих машинах и начните с установки БД.

### Сервер базы данных

Запустите `NavixyInstaller.ps1` через PowerShell и выберите  
`Install Database Only` — введите **2** и нажмите **Enter**.

Скрипт запросит:

* **Лицензионный ключ** — получите его от отдела технических решений **ГдеМои**.  
* **Пароль к базе данных** — назначается пользователю `navixy` (сохраните этот пароль!).

![Windows - DB server](../../../../../on-premise-how-to-guide/installation/advanced-installation/windows-installation/attachments/image-20250528-124600.png)

Далее установится MySQL, создастся структура базы и заполнятся стандартные значения.  
Дождитесь завершения процесса и сохраните:

* IP-адрес сервера  
* Пароль базы данных  

Эти данные понадобятся при установке приложения.

### Сервер приложения

Запустите `NavixyInstaller.ps1` и выберите  
`Install Frontend and Backend` — введите **3** и нажмите **Enter**.

Скрипт запросит:

* **Адрес сервера БД** — IP-адрес базы данных (внутренний или внешний).  
* **Порт БД** — по умолчанию 3306. Если не меняли, просто нажмите Enter.  
* **Пароль БД** — тот, что был задан на предыдущем шаге.  
* **Домен сервиса**, **домен API**, **домен панели администратора** — аналогично односерверной установке.  
* **SSL-настройки** — `y` для HTTPS, `n` для HTTP.  
* **Пути к сертификатам** — файлы `.crt` и `.key` должны находиться на сервере.

![Windows - App server](../../../../../on-premise-how-to-guide/installation/advanced-installation/windows-installation/attachments/image-20250528-135513.png)

После указания параметров установка продолжится автоматически.  
Дождитесь завершения — PowerShell покажет процесс установки JDK, Nginx и конфигурации приложения.  
При ошибках скрипт уведомит об этом.

---

## Заключительные шаги

После завершения установки откроется окно **Службы Windows**.  
Через пару минут обновите список и убедитесь, что активны службы:

* `Navixy api-server`  
* `Navixy sms-server`  
* `Navixy tcp-server`

Все три должны находиться в состоянии **Running (Работает)**.

![Windows services](../../../../../on-premise-how-to-guide/installation/advanced-installation/windows-installation/attachments/image-20250528-104137.png)

Если служба `tcp-server` останавливается, это чаще всего указывает на неверный лицензионный ключ.  
Обратитесь в **отдел технических решений**: **solutions@gdemoi.ru**.

---

### Панель администратора

После успешной установки откройте в браузере домен панели администратора.  
Должна загрузиться страница входа.

Данные по умолчанию:

* **Логин:** `admin`  
* **Пароль:** `admin`

Рекомендуется сменить пароль администратора незамедлительно после первого входа.

---

### Пользовательский интерфейс

Для работы пользовательского интерфейса необходимо указать его домен в разделе  
**Панель администратора → Настройки сервиса**, как описано в документе  
[Имя домена](https://app.gitbook.com/s/KdgeXg71LpaDrwexQYwp/settings/domain-name).

Без этого пользовательский интерфейс не будет доступен.

---

### Обновления

Чтобы обновить платформу **ГдеМои – Локальная версия** на Windows до последней версии,  
см. инструкцию [Обновление на Windows](../../update/update-windows/).

---

### Устранение неполадок

Если в процессе установки или настройки возникнут ошибки,  
ознакомьтесь с разделом [Устранение неполадок](../../../troubleshooting/), где приведены типовые сценарии и способы их устранения.
